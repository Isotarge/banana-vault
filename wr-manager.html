<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark"/>
    <title>WR Manager</title>
</head>
<body>
    <style>
        * {
            font-family: sans-serif;
        }
    </style>
    <script>
        // Add links to help support original runners
        let runners = {
            "Steven Zwartjes": [],
            "Alex Penev": [],
            "Znernicus": [
                "https://www.youtube.com/@Znernicus",
                "https://www.twitch.tv/znernicus",
                "https://bsky.app/profile/znernicus.bsky.social",
                "https://twitter.com/Znernicus",
                "https://www.speedrun.com/users/Znernicus",
                "https://znernicus.bandcamp.com/",
                "https://soundcloud.com/user-460448267",
                "https://www.instagram.com/znernicus",
            ],
            "Cfox": [
                "https://www.youtube.com/@Cfoxx7",
                "https://www.twitch.tv/cfox",
                "https://bsky.app/profile/cfox7.bsky.social",
                "https://twitter.com/cfoxTwitch",
                "https://www.speedrun.com/users/Cfox",

            ],
            "leftysheroes": [],
            "signakong": [
                "https://www.youtube.com/@signakong",
                "https://www.twitch.tv/signakong",
                "https://www.speedrun.com/users/signakong",
                "https://twitter.com/signakong",
            ],
            "Connor75": [
                "https://www.twitch.tv/Connor75",
                "https://www.youtube.com/@_Connor75",
                "https://www.youtube.com/@Connor75",
                "https://bsky.app/profile/connor75.bsky.social",
                "https://www.speedrun.com/users/Connor75",
                "https://twitter.com/_Connor75",
            ],
            "Falcon": [],
            "2dos": [
                "https://dk64randomizer.com/",
                "https://www.twitch.tv/2dos",
                "https://www.youtube.com/@2dos",
                "https://bsky.app/profile/2dos.dk64randomizer.com",
                "https://www.speedrun.com/users/2dos",
                "https://twitter.com/2dosSRL",
                "https://github.com/2dos",
            ],
            "deutsch_joe": [],
            "zorulda": [
                "https://www.twitch.tv/zorulda",
                "https://www.youtube.com/@zoruldasrl",
                "https://www.speedrun.com/users/zorulda",
                "https://twitter.com/zorulda",
            ],
            "TJ Blakely": [
                "https://www.youtube.com/@TJBlakely",
                "https://www.twitch.tv/tjblakely",
                "https://bsky.app/profile/tjblakely.bsky.social",
                "https://www.speedrun.com/users/TJBlakely",
                "https://twitter.com/TJBlakely_",
            ],
            "Isotarge": [
                "https://www.youtube.com/@Isotarge",
                "https://www.twitch.tv/isotarge",
                "https://bsky.app/profile/isotarge.bsky.social",
                "https://github.com/Isotarge",
                "https://infosec.exchange/@isotarge",
                "https://twitter.com/Isotarge",
                "https://thegreywar.com/",
                "https://integer-max.itch.io/",
                "https://twitter.com/IntegerMax",
                "https://www.speedrun.com/users/Isotarge",
                "https://tasvideos.org/Users/Profile/Isotarge",
            ],
            "RingRush": [
                "https://www.youtube.com/@RingRush",
                "https://twitter.com/rusherofrings",
                "https://tasvideos.org/Users/Profile/RingRush",
            ],
            "Kosmic": [
                "https://www.youtube.com/@Kosmicd12",
                "https://www.twitch.tv/kosmic",
                "https://www.patreon.com/kosmicd12",
                "https://www.youtube.com/@kosmicspeedruns",
                "https://www.speedrun.com/users/Kosmic",
                "https://twitter.com/kosmicd12",
            ],
            "Manocheese": [
                "https://www.youtube.com/user/cheeseoman",
                "https://sites.google.com/site/manocheese",
            ],
            "PMIT": [],
            "rdrunner": [],
            "Kiwikiller67": [
                "https://www.youtube.com/@Kiwikiller67",
                "https://www.twitch.tv/kiwikiller67",
                "https://twitter.com/Kiwikiller67",
                "https://www.speedrun.com/users/Kiwikiller67",
            ],
            "KAS": [
                "https://www.nicovideo.jp/user/4799376",
            ],
            "Awhitmore": [
                "https://www.youtube.com/@ASpeedTeachMore",
                "https://www.youtube.com/@awhitmore7317",
                "https://www.twitch.tv/awhitmore",
                "https://www.speedrun.com/users/Awhitmore",
                "https://twitter.com/Awhitmore1",
            ],
            "Bismuth": [
                "https://linktr.ee/bismuth9",
                "https://www.patreon.com/bismuth9",
                "https://www.youtube.com/@Bismuth9",
                "https://www.twitch.tv/bismuth9",
                "https://bsky.app/profile/bismuthsr.bsky.social",
                "https://x.com/Bismuthi",
                "https://www.speedrun.com/users/Bismuth",
                "https://www.youtube.com/@Bismuth-Music",
                "https://soundcloud.com/bismuth9",
            ],
            "toyomana": [
                "https://www.youtube.com/@ToyoMana64_RTA",
                "https://www.twitch.tv/toyomana",
                "https://www.speedrun.com/users/toyomana",
                "https://bsky.app/profile/toyomana.bsky.social",
            ],
            "EmoArbiter": [
                "https://www.youtube.com/@emoarbiter",
                "https://www.twitch.tv/emoarbiter",
                "https://www.speedrun.com/users/EmoArbiter",
            ],
            "RandomSauce": [
                "https://www.youtube.com/@randomsauce",
                "https://www.twitch.tv/randomsauce",
                "https://bsky.app/profile/randomsauce.bsky.social",
                "https://www.speedrun.com/users/RandomSauce",
            ],
            "Ballaam": [
                "https://dk64randomizer.com/",
                "https://bsky.app/profile/ballaam.dk64randomizer.com",
                "https://www.twitch.tv/theballaam96",
                "https://www.youtube.com/@Ballaam",
                "https://theballaam96.github.io/",
                "https://github.com/theballaam96",
                "https://www.youtube.com/@lookatthewindow3599",
                "https://www.speedrun.com/users/theballaam96",
                "https://tasvideos.org/Users/Profile/theballaam96",
            ],
        };

        const possibleVideoIssues = [
            'multipleParts',
            'extraFootageBefore',
            'extraFootageAfter',
            'resolutionBelow720',
            'framerateBelow30',
            'hasInterlacingIssues',
            'hasBackgroundNoise',
        ];

        const checkboxes = [
            'isMissing',
            'isEncoded',
            ...possibleVideoIssues,
        ];

        let runs = []; // Loaded from JSON
        let selectedRunIndex = 0;

        function formatRunOption(i, run) {
            return `<option value='${i}'>${run.category} (${run.platform}) in ${run.time.replaceAll('-', ':')} by ${run.runner} on ${run.playedDate}</option>`;
        }

        function refreshSelectedRunUI() {
            const run = runs[selectedRunIndex];
            document.getElementById('current-run-title').innerText = `Donkey Kong 64 - ${run.category} (${run.platform}) in ${run.time.replaceAll('-', ':')} by ${run.runner} - ${run.playedDate}`;
            document.getElementById('run-description').value = generateDescription(run);
            document.getElementById('original-source-list').innerHTML = sourcesToListDOM(run.originalSources);
            document.getElementById('youtube-list').innerHTML = sourcesToListDOM(run.uploadedYouTube);
            document.getElementById('archive-org-list').innerHTML = sourcesToListDOM(run.uploadedArchive);
            for (const checkbox of checkboxes) {
                document.getElementById(checkbox).checked = run[checkbox] === true;
            }
        }

        function refreshRuns() {
            let runsToEncodeDOM = '';
            let runsToEncodeCount = 0;
            let runsToUploadDOM = '';
            let runsToUploadCount = 0;
            let runsUploadedDOM = '';
            let runsUploadedCount = 0;
            let uncategorisedRunsDOM = '';
            let uncategorisedRunsCount = 0;
            let missingRunsDOM = '';
            let missingRunsCount = 0;
            for (const i in runs) {
                const run = runs[i];
                const isFullyArchived =
                    Array.isArray(run.uploadedArchive) && run.uploadedArchive.length > 0 &&
                    Array.isArray(run.uploadedYouTube) && run.uploadedYouTube.length > 0;
                const hasSource = Array.isArray(run.originalSources) && run.originalSources.length > 0;
                if (isFullyArchived) {
                    runsUploadedDOM += formatRunOption(i, run);
                    runsUploadedCount++;
                } else {
                    if (run.isMissing) {
                        missingRunsDOM += formatRunOption(i, run);
                        missingRunsCount++;
                    } else if (hasSource) {
                        if (runHasUnresolvedVideoIssues(run)) {
                            runsToEncodeDOM += formatRunOption(i, run);
                            runsToEncodeCount++;
                        } else {
                            runsToUploadDOM += formatRunOption(i, run);
                            runsToUploadCount++;
                        }
                    } else {
                        uncategorisedRunsDOM += formatRunOption(i, run);
                        uncategorisedRunsCount++;
                    }
                }
            }

            document.getElementById("header-to-encode").innerText = `Runs to Encode (${runsToEncodeCount})`;
            document.getElementById("header-to-upload").innerText = `Runs to Upload (${runsToUploadCount})`;
            document.getElementById("header-uploaded").innerText = `Uploaded Runs (${runsUploadedCount})`;
            document.getElementById("header-uncategorised").innerText = `Uncategorised Runs (${uncategorisedRunsCount})`;
            document.getElementById("header-missing").innerText = `Missing Runs (${missingRunsCount})`;

            document.getElementById("run-to-encode").innerHTML = runsToEncodeDOM;
            document.getElementById("run-to-upload").innerHTML = runsToUploadDOM;
            document.getElementById("uploaded-run").innerHTML = runsUploadedDOM;
            document.getElementById("uncategorised-run").innerHTML = uncategorisedRunsDOM;
            document.getElementById("missing-run").innerHTML = missingRunsDOM;
            document.getElementById("run-to-upload").dispatchEvent(new Event('change'));
        }

        function importJSON() {
            const input = document.getElementById('import-json');
            if (!input) {
                alertModal("Couldn't find the fileinput DOM element.");
            } else if (!input.files) {
                alertModal("This browser doesn't seem to support the `files` property of file inputs.");
            } else if (!input.files[0]) {
                alertModal("Please select a file before clicking 'Import JSON'");
            } else {
                const file = input.files[0];
                const fr = new FileReader();
                fr.onload = function(e) {
                    let lines = e.target.result;
                    const tree = JSON.parse(lines);
                    if (Array.isArray(tree)) {
                        runs = tree;
                        refreshRuns();
                    } else {
                        alert("Invalid tree format from JSON :(");
                    }
                };
                fr.readAsText(file);
            }
        }

        function exportJSON(id) {
            function download(content, fileName, contentType) {
                const a = document.createElement("a");
                const file = new Blob([content], {type: contentType});
                a.href = URL.createObjectURL(file);
                a.download = fileName;
                a.click();
            }
			download(JSON.stringify(runs, null, '\t'), `WRs.json`, 'application/json');
		}

        function getDurationString(date1, date2) {
            date1D = new Date(date1);
            date2D = new Date(date2);
            const earlierDate = date1D < date2D ? date1D : date2D;
            const laterDate = date1D > date2D ? date1D : date2D;

            const years = laterDate.getFullYear() - earlierDate.getFullYear();
            const months = laterDate.getMonth() - earlierDate.getMonth();
            const days = laterDate.getDate() - earlierDate.getDate();

            let adjustedYears = years;
            let adjustedMonths = months;
            let adjustedDays = days;

            // Adjust months and years if needed
            if (adjustedDays < 0) {
                adjustedMonths -= 1;
                const prevMonth = new Date(laterDate.getFullYear(), laterDate.getMonth(), 0).getDate();
                adjustedDays += prevMonth;
            }

            if (adjustedMonths < 0) {
                adjustedYears -= 1;
                adjustedMonths += 12;
            }

            const parts = [];
            if (adjustedYears > 0) parts.push(`${adjustedYears} year${adjustedYears > 1 ? 's' : ''}`);
            if (adjustedMonths > 0) parts.push(`${adjustedMonths} month${adjustedMonths > 1 ? 's' : ''}`);
            if (adjustedDays > 0) parts.push(`${adjustedDays} day${adjustedDays > 1 ? 's' : ''}`);

            return parts.length > 0 ? parts.join(', ') : '0 days';
        }

        function sourcesToList(sources, prefix) {
            if (!Array.isArray(sources) || sources.length == 0) {
                return '';
            }
            if (sources.length > 1) {
                // Plural
                let finalString = `\n${prefix} sources:\n`
                for (const source of sources) {
                    finalString += `- ${source}\n`;
                }
                return finalString;
            } else {
                // Singular
                return `\n${prefix} source: ${sources[0]}`;
            }
        }

        function sourcesToListDOM(sources) {
            let listDOM = '';
            if (Array.isArray(sources) && sources.length > 0) {
                for (const url of sources) {
                    listDOM += `<li><a href='${url}' target='_blank'>${url}</a></li>`;
                }
            } else {
                listDOM = '<li style="color: #ff4747">Missing!</li>';
            }
            return listDOM;
        }

        function isSameCategory(oneRun, anotherRun) {
            return (oneRun != null && anotherRun != null)
                && oneRun.category === anotherRun.category;
        }

        function isSamePlatform(oneRun, anotherRun) {
            return (oneRun != null && anotherRun != null)
                && oneRun.platform === anotherRun.platform;
        }

        function isSameRun(oneRun, anotherRun) {
            return (oneRun != null && anotherRun != null) &&
                oneRun.category === anotherRun.category &&
                oneRun.platform === anotherRun.platform &&
                oneRun.runner === anotherRun.runner &&
                oneRun.playedDate === anotherRun.playedDate &&
                oneRun.time === anotherRun.time;
        }

        function compareDurations(duration1, duration2) {
            // Helper function to parse a duration string into seconds
            function parseDuration(duration) {
                const parts = duration.split('-').reverse();
                const timeUnits = [1, 60, 3600]; // seconds, minutes, hours
                let totalSeconds = 0;

                for (let i = 0; i < timeUnits.length; i++) {
                    let part = parts[i] || '0'; // Default missing parts to '0'
                    if (part === 'x') continue;  // Skip wildcards
                    totalSeconds += parseInt(part, 10) * timeUnits[i];
                }

                return totalSeconds;
            }

            const time1 = parseDuration(duration1);
            const time2 = parseDuration(duration2);

            if (time1 < time2) return -1;
            if (time1 > time2) return 1;
            return 0;
        }

        function isFaster(oneRun, anotherRun) {
            if (oneRun == null) {
                return anotherRun != null;
            }
            if (anotherRun == null) {
                return false;
            }
            return compareDurations(oneRun.time, anotherRun.time) == 1;
        }

        function isNewer(oneRun, anotherRun) {
            if (oneRun == null) {
                return anotherRun != null;
            }
            if (anotherRun == null) {
                return false;
            }
            const runPlayedDate = new Date(oneRun.playedDate);
            const anotherRunPlayedDate = new Date(anotherRun.playedDate);
            return anotherRunPlayedDate > runPlayedDate || (runPlayedDate == anotherRunPlayedDate && isFaster(oneRun, anotherRun));
        }

        function getPreviousRun(run) {
            let previousRun = null;
            for (const possiblePreviousRun of runs) {
                // The previous run must be of the same category as the current run
                if (!isSameCategory(run, possiblePreviousRun)) {
                    continue;
                }
                // The previous run must be on the same platform as the current run
                if (!isSamePlatform(run, possiblePreviousRun)) {
                    continue;
                }
                // The previous run must not be the same run as the current run
                if (isSameRun(run, possiblePreviousRun)) {
                    continue;
                }
                // The previous run must be older than the current run
                if (isNewer(run, possiblePreviousRun)) {
                    continue;
                }
                // The previous run must be slower than the current run
                if (isFaster(run, possiblePreviousRun)) {
                    continue;
                }

                if (!previousRun) {
                    // We don't have any previous run candidate yet, initialize!
                    previousRun = possiblePreviousRun;
                } else {
                    // Only replace the previous run candidate if the newly found run is faster than the existing candidate
                    if (isFaster(previousRun, possiblePreviousRun)) {
                        previousRun = possiblePreviousRun;
                    }
                }
            }
            return previousRun;
        }

        function getNextRun(run) {
            let nextRun = null;
            for (const possibleNextRun of runs) {
                // The next run must be of the same category as the current run
                if (!isSameCategory(run, possibleNextRun)) {
                    continue;
                }
                // The next run must be on the same platform as the current run
                if (!isSamePlatform(run, possibleNextRun)) {
                    continue;
                }
                // The next run must not be the same run as the current run
                if (isSameRun(run, possibleNextRun)) {
                    continue;
                }
                // The next run must be newer than the current run
                if (!isNewer(run, possibleNextRun)) {
                    continue;
                }
                // The next run must be faster than the current run
                if (!isFaster(run, possibleNextRun)) {
                    continue;
                }

                if (!nextRun) {
                    // We don't have any next run candidate yet, initialize!
                    nextRun = possibleNextRun;
                } else {
                    // Only replace the next run candidate if the newly found run is slower than the existing candidate
                    if (!isFaster(nextRun, possibleNextRun)) {
                        nextRun = possibleNextRun;
                    }
                }
            }
            return nextRun;
        }

        function getRunnerLinks(runnerName) {
            const runner = runners[runnerName];
            if (Array.isArray(runner) && runner.length > 0) {
                let links = `\n\nSupport the runner at:\n`;
                for (const link of runner) {
                    links += `- ${link}\n`;
                }
                return links;
            }
            return '';
        }

        function generateDescription(run) {
            const nextRun = getNextRun(run);
            let description = `Played by ${run.runner} on ${run.playedDate}\n`;
            description += `Category: ${run.category} (${run.platform})\n`;
            if (nextRun) {
                description += `World record from ${run.playedDate} to ${nextRun.playedDate} (${getDurationString(run.playedDate, nextRun.playedDate)})`;
            } else {
                description += `World record from ${run.playedDate} to present`;
            }
            description += sourcesToList(run.originalSources, 'Original');
            description += sourcesToList(run.uploadedArchive, 'Archive');
            description += getRunnerLinks(run.runner);
            return description;
        }

        function selectRun(selectID) {
            selectedRunIndex = document.getElementById(selectID).value;
            refreshSelectedRunUI();
        }

        function selectPreviousRun() {
            const previousRun = getPreviousRun(runs[selectedRunIndex]);
            if (previousRun) {
                selectedRunIndex = runs.indexOf(previousRun);
                refreshSelectedRunUI();
            }
        }

        function selectNextRun() {
            const nextRun = getNextRun(runs[selectedRunIndex]);
            if (nextRun) {
                selectedRunIndex = runs.indexOf(nextRun);
                refreshSelectedRunUI();
            }
        }

        function addLink(key, link) {
            if (!runs[selectedRunIndex]) {
                return false;
            }
            if (!Array.isArray(runs[selectedRunIndex][key])) {
                runs[selectedRunIndex][key] = [];
            }
            runs[selectedRunIndex][key].push(link);
            refreshSelectedRunUI();
            return true;
        }

        function addSource() {
            const result = addLink('originalSources', document.getElementById('original-source-url').value);
            document.getElementById('original-source-url').value = '';
            return result;
        }

        function addYouTubeLink() {
            const result = addLink('uploadedYouTube', document.getElementById('banana-vault-youtube-url').value);
            document.getElementById('banana-vault-youtube-url').value = '';
            return result;
        }

        function addArchiveLink() {
            const result = addLink('uploadedArchive', document.getElementById('archive-org-url').value);
            document.getElementById('archive-org-url').value = '';
            return result;
        }

        function toggleBoolean(_this, key) {
            const isMissing = _this.checked;
            if (isMissing) {
                runs[selectedRunIndex][key] = true;
            } else {
                delete runs[selectedRunIndex][key];
            }
        }

        function runHasUnresolvedVideoIssues(run) {
            if (run['isEncoded'] === true) {
                return false;
            }
            for (const videoIssue of possibleVideoIssues) {
                if (run[videoIssue] === true) {
                    return true;
                }
            }
            return false;
        }

        function generateEncodeCommand() {
            const files = [];
            const trimBefore = [];
            const trimAfter = [];
            let lines = document.getElementById("video-files").value.split("\n");
            for (const line of lines) {
                const lineComponents = line.split(";");
                if (lineComponents[0]) { // Filename found
                    files.push(lineComponents[0]);
                    if (typeof lineComponents[1] === 'string' && (lineComponents[1] !== '0' && lineComponents[1] !== '')) {
                        trimBefore.push(lineComponents[1]);
                    } else {
                        trimBefore.push(0);
                    }
                    if (typeof lineComponents[2] === 'string' && (lineComponents[2] !== '0' && lineComponents[2] !== '')) {
                        trimAfter.push(lineComponents[2]);
                    } else {
                        trimAfter.push(0);
                    }
                }
            }
            console.log(files, trimBefore, trimAfter);
            let finalCommand = `@echo off\n\n`;
            finalCommand += `ffmpeg `;
            let filters = `-filter_complex "`;
            for (const fileIndex in files) {
                const file = files[fileIndex];
                finalCommand += `-i \"${file}\" `;
                filters += `[${fileIndex}:v]trim=start=${trimBefore[fileIndex]},[${fileIndex}:a]atrim=start=${trimBefore[fileIndex]},`
                // TODO: Precise trim after segment
                finalCommand += `^\n`;
            }
            filters += `scale=-2:1080,fps=60`; // applied to all inputs (ideally before concat? idk how it works yet)
            filters += `" ^\n`;
            finalCommand += filters;
            finalCommand += `-c:v libx265 -crf 25 -preset faster -c:a aac -b:a 384k "${files[1]}.x265.mkv"\n\n`;
            finalCommand += `pause\n`;
            document.getElementById("encode-command").innerText = finalCommand;
        }
    </script>
    <h1>üçå WR Manager üçå</h1>
    <form onsubmit="event.preventDefault();">
        <input type="file" name="import-json" id="import-json">
        <button onclick="importJSON()">Import JSON</button>
        <button onclick="exportJSON()">Export JSON</button>
    </form>
    <h2 id="header-to-encode">Runs to Encode</h2>
    <select name="run-to-encode" id="run-to-encode" onchange="selectRun('run-to-encode')">
        <option>Please import JSON</option>
    </select>
    <h2 id="header-to-upload">Runs to Upload</h2>
    <select name="run-to-upload" id="run-to-upload" onchange="selectRun('run-to-upload')">
        <option>Please import JSON</option>
    </select>
    <h2 id="header-uploaded">Uploaded Runs</h2>
    <select name="uploaded-run" id="uploaded-run" onchange="selectRun('uploaded-run')">
        <option>Please import JSON</option>
    </select>
    <h2 id="header-uncategorised">Uncategorised Runs</h2>
    <select name="uncategorised-run" id="uncategorised-run" onchange="selectRun('uncategorised-run')">
        <option>Please import JSON</option>
    </select>
    <h2 id="header-missing">Missing Runs</h2>
    <select name="missing-run" id="missing-run" onchange="selectRun('missing-run')">
        <option>Please import JSON</option>
    </select>
    <h3 id="current-run-title">Current Run</h3>
    <input type="checkbox" id="isMissing" oninput="toggleBoolean(this, 'isMissing')"> Missing Video<br>
    <h4>Video issues</h4>
    <input type="checkbox" id="multipleParts" oninput="toggleBoolean(this, 'multipleParts')"> Multiple Parts<br>
    <input type="checkbox" id="extraFootageBefore" oninput="toggleBoolean(this, 'extraFootageBefore')"> Extra Footage Before Run<br>
    <input type="checkbox" id="extraFootageAfter" oninput="toggleBoolean(this, 'extraFootageAfter')"> Extra Footage After Run<br>
    <input type="checkbox" id="resolutionBelow720" oninput="toggleBoolean(this, 'resolutionBelow720')"> Resolution Below 720p<br>
    <input type="checkbox" id="framerateBelow30" oninput="toggleBoolean(this, 'framerateBelow30')"> Framerate Below 30<br>
    <input type="checkbox" id="hasInterlacingIssues" oninput="toggleBoolean(this, 'hasInterlacingIssues')"> Interlacing Issues<br>
    <input type="checkbox" id="hasBackgroundNoise" oninput="toggleBoolean(this, 'hasBackgroundNoise')"> Constant Background Noise<br>
    <br>
    <input type="checkbox" id="isEncoded" oninput="toggleBoolean(this, 'isEncoded')"> Video Has Been Re-Encoded<br>
    <br>
    <button onclick="selectPreviousRun()"><< Previous Run</button>&nbsp;<button onclick="selectNextRun()">Next Run >></button>
    <h4>Description</h4>
    <textarea id='run-description' style="width: 500px; height: 100px;">Please import JSON</textarea>
    <h4>Original Sources</h4>
    <p>Links to the original YouTube/Twitch/SDA/archive.org source(s) from the original runner where possible</p>
    <ul id="original-source-list">
        <li>Please import JSON</li>
    </ul>
    <input type="url" name="original-source-url" id="original-source-url">
    <button onclick="addSource()">Add Original Source URL</button>
    <h4>Banana Vault YouTube URLs</h4>
    <p>To be added after uploading the run to "The Banana Vault" on YouTube</p>
    <ul id="youtube-list">
        <li>Please import JSON</li>
    </ul>
    <input type="url" name="banana-vault-youtube-url" id="banana-vault-youtube-url">
    <button onclick="addYouTubeLink()">Add Banana Vault YouTube URL</button>
    <h4>archive.org URLs</h4>
    <p>To be added after uploading the run to archive.org</p>
    <ul id="archive-org-list">
        <li>Please import JSON</li>
    </ul>
    <input type="url" name="archive-org-url" id="archive-org-url">
    <button onclick="addArchiveLink()">Add archive.org URL</button>
    <h3>Encoder</h3>
    <h4>Run Video Part(s)</h4>
    <textarea onchange="generateEncodeCommand()" id="video-files" style="width: 500px; height: 100px;"></textarea>
    <br>
    <h4>FFMPEG Command Output</h4>
    <code id="encode-command"></code>
</body>
</html>